{"is_source_file": true, "format": "Python", "description": "Main source file setting up a FastAPI application for a comprehensive Supabase-based authentication backend, including app configuration, middleware, routers, WebSocket support, and health endpoints.", "external_files": ["src.api.routes", "src.services.session_service", "src.config.settings", "src.services.jwt_service"], "external_methods": ["session_service.cleanup_expired_sessions()", "session_service.get_session_info()", "jwt_service.verify_token()"], "published": ["app"], "classes": [], "methods": [{"name": "lifespan(app: FastAPI)", "description": "Async context manager for application startup and shutdown events", "scope": "", "scopeKind": ""}, {"name": "add_process_time_header(request: Request, call_next)", "description": "Middleware to add request processing time to response headers", "scope": "", "scopeKind": ""}, {"name": "session_cleanup_middleware(request: Request, call_next)", "description": "Middleware to periodically cleanup expired sessions", "scope": "", "scopeKind": ""}, {"name": "global_exception_handler(request: Request, exc: Exception)", "description": "Global handler for unhandled exceptions", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Endpoint to check API health status", "scope": "", "scopeKind": ""}, {"name": "api_status()", "description": "Endpoint to fetch detailed API status and statistics", "scope": "", "scopeKind": ""}, {"name": "websocket_endpoint(websocket)", "description": "WebSocket handler for real-time notifications and session monitoring", "scope": "", "scopeKind": ""}, {"name": "custom_openapi()", "description": "Generate a customized OpenAPI schema with security schemes", "scope": "", "scopeKind": ""}, {"name": "startup_event()", "description": "Application startup event handler", "scope": "", "scopeKind": ""}, {"name": "shutdown_event()", "description": "Application shutdown event handler", "scope": "", "scopeKind": ""}], "calls": ["session_service.cleanup_expired_sessions()", "session_service.get_session_info(session_id)", "jwt_service.verify_token(token)"], "search-terms": ["FastAPI", "supabase_auth_backend", "session cleanup", "WebSocket", "JWT token", "health check endpoint", "authentication backend"], "state": 2, "file_id": 2, "knowledge_revision": 64, "git_revision": "6ad20ab69f3fbc943e47aacf4d49fc9b4afde8e7", "revision_history": [{"8": "f54078fe5c80d60133c119944791d13654a81026"}, {"42": "f54078fe5c80d60133c119944791d13654a81026"}, {"45": "f54078fe5c80d60133c119944791d13654a81026"}, {"64": "6ad20ab69f3fbc943e47aacf4d49fc9b4afde8e7"}], "ctags": [{"_type": "tag", "name": "add_process_time_header", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def add_process_time_header(request: Request, call_next):$/", "language": "Python", "kind": "function", "signature": "(request: Request, call_next)"}, {"_type": "tag", "name": "api_status", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def api_status():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "custom_openapi", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^def custom_openapi():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "global_exception_handler", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def global_exception_handler(request: Request, exc: Exception):$/", "language": "Python", "kind": "function", "signature": "(request: Request, exc: Exception)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "lifespan", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def lifespan(app: FastAPI):$/", "language": "Python", "kind": "function", "signature": "(app: FastAPI)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "session_cleanup_middleware", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def session_cleanup_middleware(request: Request, call_next):$/", "language": "Python", "kind": "function", "signature": "(request: Request, call_next)"}, {"_type": "tag", "name": "shutdown_event", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def shutdown_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startup_event", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def startup_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "websocket_endpoint", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11899/supabase_auth_backend/src/api/main.py", "pattern": "/^async def websocket_endpoint(websocket):$/", "language": "Python", "kind": "function", "signature": "(websocket)"}], "hash": "104a78eef9eecb38724078dd8cb01f93", "format-version": 4, "code-base-name": "supabase_auth_backend", "filename": "supabase_auth_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}]}